<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå»ã®é›†è¨ˆçµæœæ¤œç´¢</title>
    </head>
<body style="padding: 20px; font-family: sans-serif;">

    <h2>ğŸ“… éå»ã®é›†è¨ˆçµæœæ¤œç´¢</h2>

    <div style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <form method="POST" action="{{ url_for('ranking_search') }}">
            <label>å¯¾è±¡ï¼š</label>
            <select name="year">
                <option value="2025">2025å¹´</option>
                <option value="2026">2026å¹´</option>
            </select>
            
            <select name="month">
                {% for i in range(1, 13) %}
                <option value="{{ i }}">{{ i }}æœˆ</option>
                {% endfor %}
            </select>
            
            <button type="submit" style="margin-left: 10px;">æ¤œç´¢</button>
        </form>
    </div>

    {% if year and month %}
        <h3> {{ year }}å¹´{{ month }}æœˆã®çµæœ</h3>

        {% if ranking %}
            <table border="1" cellpadding="10" style="border-collapse: collapse; width: 100%;">
                <tr style="background: #eee;">
                    <th>é †ä½</th>
                    <th>åå‰</th>
                    <th>å½¹è·</th>
                    <th>ç²å¾—ç¥¨æ•°</th>
                </tr>
                {% for row in ranking %}
                <tr>
                    <td>{{ loop.index }}ä½</td>
                    <td><b>{{ row.user.username }}</b></td>
                    <td>{{ row.user.role }}</td>
                    <td>{{ row.count }}ç¥¨</td>
                </tr>
                {% endfor %}
            </table>
        {% else %}
            <p>ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        {% endif %}
    
    {% else %}
        <p>â†‘ ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å¹´æœˆã‚’é¸ã‚“ã§æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚</p>
    {% endif %}

    <div style="margin-top: 20px;">
        <a href="{{ url_for('vote_page') }}">æˆ»ã‚‹</a>
    </div>

</body>
</html>